{"version":3,"sources":["../../src/webpack/circular-loader.js"],"names":["templateUrlRegex","stylesRegex","stringRegex","templateProperty","styleProperty","replaceStringsWithRequires","string","replace","match","quote","url","charAt","module","exports","source","newSource","urls"],"mappings":";;AAAA;AACA,IAAIA,mBAAmB,gDAAvB;AACA,IAAIC,cAAc,6CAAlB;AACA,IAAIC,cAAc,+BAAlB;;AAEA;AACA,IAAIC,mBAAmB,UAAvB;AACA,IAAIC,gBAAgB,QAApB;;AAEA;AACA,SAASC,0BAAT,CAAoCC,MAApC,EAA4C;AAC3C,QAAOA,OAAOC,OAAP,CAAeL,WAAf,EAA4B,UAAUM,KAAV,EAAiBC,KAAjB,EAAwBC,GAAxB,EAA6B;AAC/D,MAAIA,IAAIC,MAAJ,CAAW,CAAX,MAAkB,GAAtB,EAA2B;AAC1BD,SAAM,OAAOA,GAAb;AACA;AACD,SAAO,cAAcA,GAAd,GAAoB,IAA3B;AACA,EALM,CAAP;AAMA;;AAED;AACAE,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiB;AACjC;AACA,KAAIC,YAAYD,OAAOP,OAAP,CAAeP,gBAAf,EAAiC,UAAUQ,KAAV,EAAiBE,GAAjB,EAAsB;AACtE,SAAOP,mBAAmB,GAAnB,GAAyBE,2BAA2BK,GAA3B,CAAhC;AACA,EAFe,EAEbH,OAFa,CAELN,WAFK,EAEQ,UAAUO,KAAV,EAAiBQ,IAAjB,EAAuB;AAC9C,SAAOZ,gBAAgB,GAAhB,GAAsBC,2BAA2BW,IAA3B,CAA7B;AACA,EAJe,CAAhB;;AAMA;AACA,QAAOD,SAAP;AACA,CAVD","file":"circular-loader.js","sourcesContent":["/** set regex expressions to search for */\nvar templateUrlRegex = /templateUrl\\s*:(\\s*['\"`](.*?)['\"`]\\s*([,}]))/gm;\nvar stylesRegex = /styleUrl\\s*:(\\s*['\"`](.*?)['\"`]\\s*([,}]))/gm;\nvar stringRegex = /(['`\"])((?:[^\\\\]\\\\\\1|.)*?)\\1/g;\n\n/** set property name */\nvar templateProperty = 'template';\nvar styleProperty = 'styles';\n\n/** replace the url with a require statement */\nfunction replaceStringsWithRequires(string) {\n\treturn string.replace(stringRegex, function (match, quote, url) {\n\t\tif (url.charAt(0) !== \".\") {\n\t\t\turl = \"./\" + url;\n\t\t}\n\t\treturn \"require('\" + url + \"')\";\n\t});\n}\n\n/** replace templateUrl and styleUrl with require statements */\nmodule.exports = function(source) {\n\t/** replace the templateUrl and styleUrl fields */\n\tvar newSource = source.replace(templateUrlRegex, function (match, url) {\n\t\treturn templateProperty + \":\" + replaceStringsWithRequires(url);\n\t}).replace(stylesRegex, function (match, urls) {\n\t\treturn styleProperty + \":\" + replaceStringsWithRequires(urls);\n\t});\n\n\t/** return the new source */\n\treturn newSource;\n};"]}